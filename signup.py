# Form implementation generated from reading ui file 'signup.ui'
#
# Created by: PyQt6 UI code generator 6.1.0
#
# WARNING: Any manual changes made to this file will be lost when pyuic6 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt6 import QtCore, QtGui, QtWidgets
import sqlite3
from login import Ui_login

class Ui_create(object):
    def opensignin(self):
        self.window= QtWidgets.QWidget()
        self.ui= Ui_login()
        self.ui.setupUi(self.window)
        create.close()
        self.window.show()


    def setupUi(self, create):
        create.setObjectName("create")
        create.resize(475, 301)
        self.signupR = QtWidgets.QPushButton(create)
        self.signupR.setGeometry(QtCore.QRect(190, 260, 75, 31))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.signupR.setFont(font)
        self.signupR.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.ArrowCursor))
        self.signupR.setObjectName("signupR")
        self.signupL = QtWidgets.QLabel(create)
        self.signupL.setGeometry(QtCore.QRect(190, 20, 101, 51))
        font = QtGui.QFont()
        font.setPointSize(22)
        self.signupL.setFont(font)
        self.signupL.setObjectName("signupL")
        self.layoutWidget = QtWidgets.QWidget(create)
        self.layoutWidget.setGeometry(QtCore.QRect(90, 80, 167, 151))
        self.layoutWidget.setObjectName("layoutWidget")
        self.verticalLayout = QtWidgets.QVBoxLayout(self.layoutWidget)
        self.verticalLayout.setContentsMargins(0, 0, 0, 0)
        self.verticalLayout.setObjectName("verticalLayout")
        self.unR = QtWidgets.QLabel(self.layoutWidget)
        font = QtGui.QFont()
        font.setPointSize(10)
        self.unR.setFont(font)
        self.unR.setObjectName("unR")
        self.verticalLayout.addWidget(self.unR)
        self.emailR = QtWidgets.QLabel(self.layoutWidget)
        font = QtGui.QFont()
        font.setPointSize(10)
        self.emailR.setFont(font)
        self.emailR.setObjectName("emailR")
        self.verticalLayout.addWidget(self.emailR)
        self.pwR = QtWidgets.QLabel(self.layoutWidget)
        font = QtGui.QFont()
        font.setPointSize(10)
        self.pwR.setFont(font)
        self.pwR.setObjectName("pwR")
        self.verticalLayout.addWidget(self.pwR)
        self.pwcR = QtWidgets.QLabel(self.layoutWidget)
        font = QtGui.QFont()
        font.setPointSize(10)
        self.pwcR.setFont(font)
        self.pwcR.setObjectName("pwcR")
        self.verticalLayout.addWidget(self.pwcR)
        self.profR = QtWidgets.QLabel(self.layoutWidget)
        font = QtGui.QFont()
        font.setPointSize(10)
        self.profR.setFont(font)
        self.profR.setObjectName("profR")
        self.verticalLayout.addWidget(self.profR)
        self.layoutWidget1 = QtWidgets.QWidget(create)
        self.layoutWidget1.setGeometry(QtCore.QRect(260, 80, 135, 151))
        self.layoutWidget1.setObjectName("layoutWidget1")
        self.verticalLayout_2 = QtWidgets.QVBoxLayout(self.layoutWidget1)
        self.verticalLayout_2.setContentsMargins(0, 0, 0, 0)
        self.verticalLayout_2.setObjectName("verticalLayout_2")
        self.usernameRF = QtWidgets.QLineEdit(self.layoutWidget1)
        font = QtGui.QFont()
        font.setPointSize(10)
        self.usernameRF.setFont(font)
        self.usernameRF.setCursorMoveStyle(QtCore.Qt.CursorMoveStyle.VisualMoveStyle)
        self.usernameRF.setObjectName("usernameRF")
        self.verticalLayout_2.addWidget(self.usernameRF)
        self.emailRF = QtWidgets.QLineEdit(self.layoutWidget1)
        font = QtGui.QFont()
        font.setPointSize(10)
        self.emailRF.setFont(font)
        self.emailRF.setObjectName("emailRF")
        self.verticalLayout_2.addWidget(self.emailRF)
        self.pwRF = QtWidgets.QLineEdit(self.layoutWidget1)
        font = QtGui.QFont()
        font.setPointSize(10)
        self.pwRF.setFont(font)
        self.pwRF.setEchoMode(QtWidgets.QLineEdit.EchoMode.Password)
        self.pwRF.setObjectName("pwRF")
        self.verticalLayout_2.addWidget(self.pwRF)
        self.pwcRF = QtWidgets.QLineEdit(self.layoutWidget1)
        font = QtGui.QFont()
        font.setPointSize(10)
        self.pwcRF.setFont(font)
        self.pwcRF.setEchoMode(QtWidgets.QLineEdit.EchoMode.Password)
        self.pwcRF.setObjectName("pwcRF")
        self.verticalLayout_2.addWidget(self.pwcRF)
        self.profboxR = QtWidgets.QComboBox(self.layoutWidget1)
        self.profboxR.setEnabled(True)
        font = QtGui.QFont()
        font.setPointSize(12)
        self.profboxR.setFont(font)
        self.profboxR.setEditable(False)
        self.profboxR.setFrame(True)
        self.profboxR.setObjectName("profboxR")
        self.profboxR.addItem("")
        self.profboxR.addItem("")
        self.verticalLayout_2.addWidget(self.profboxR)
        self.error = QtWidgets.QLabel(create)
        self.error.setGeometry(QtCore.QRect(120, 233, 261, 20))
        self.error.setText("")
        self.error.setObjectName("error")
        self.signupR.clicked.connect(self.createaccount)
        self.retranslateUi(create)
        QtCore.QMetaObject.connectSlotsByName(create)

    def createaccount(self):
        u = self.usernameRF.text()
        mail = self.emailRF.text()
        pw = self.pwRF.text()
        pwc = self.pwcRF.text()
        prof = self.profboxR.currentText()
        if len(u) == 0 or len(pw) == 0 or len(pwc) == 0:
            self.error.setText("Please fill in all inputs.")

        elif pw != pwc:
            self.error.setText("Passwords do not match.")
        else:
            db = sqlite3.connect('hAppDB.db')
            print("Opened database successfully")
            cursor = db.cursor()
            if prof=='Volunteer' or prof=='Consumer':
                cursor.execute("INSERT INTO users (Username,Email,Password,Profile,Points) VALUES (?,?,?,?,0)",(u, mail, pw, prof))
            else:
                cursor.execute("INSERT INTO users (Username,Email,Password,Profile) VALUES (?,?,?,?)",(u, mail, pw, prof))
            print("Records created successfully")
            self.login.clicked.connect(self.opensignin)
            db.commit()
            #db.close()

    def retranslateUi(self, create):
        _translate = QtCore.QCoreApplication.translate
        create.setWindowTitle(_translate("create", "signup"))
        self.signupR.setToolTip(_translate("create", "Press To Signup"))
        self.signupR.setText(_translate("create", "Signup"))
        self.signupL.setText(_translate("create", "Signup"))
        self.unR.setText(_translate("create", "User Name"))
        self.emailR.setText(_translate("create", "Email"))
        self.pwR.setText(_translate("create", "Password"))
        self.pwcR.setText(_translate("create", "Password Confirm "))
        self.profR.setText(_translate("create", "Profile"))
        self.usernameRF.setPlaceholderText(_translate("create", "Enter Your Name "))
        self.emailRF.setPlaceholderText(_translate("create", "Enter Your  Email"))
        self.pwRF.setPlaceholderText(_translate("create", "Enter Your Password"))
        self.pwcRF.setPlaceholderText(_translate("create", "Password Confirm "))
        self.profboxR.setCurrentText(_translate("create", "Volunteer"))
        self.profboxR.setItemText(0, _translate("create", "Volunteer"))
        self.profboxR.setItemText(1, _translate("create", "Consumer"))


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    create = QtWidgets.QWidget()
    ui = Ui_create()
    ui.setupUi(create)
    create.show()
    sys.exit(app.exec())
